#!/bin/sh
# Comstock - stock your command to the cloud
# comstock shell scripts
# shinpei(c)2014

set -e
coms_run() {
    cmd=`comstock-cli get ${1}`
    ${cmd}
}

case ${1} in
    save)
	coms_save_previous
	;;
    run)
	coms_run ${2}
	;;
    status)
	ps -p $$
	if [ -z "$BASH_VERSION" ];then
	    echo $BASH_VERSION
	    COMSTOCK_SHELL="zsh" comstock-cli status
	else
	    echo $BASH_VERSION
	    # bash or bash compatible (dash?)
	    COMSTOCK_SHELL="bash" comstock-cli status
	fi
	;;
    *)
	comstock-cli $@
esac

